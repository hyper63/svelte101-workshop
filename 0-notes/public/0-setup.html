<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Svelte 101 Workshop - Setup</title>
  <meta name="description" content="">
  <link href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAAF0lEQVRIx2NgGAWjYBSMglEwCkbBSAcACBAAAeaR9cIAAAAASUVORK5CYII=" rel="icon" type="image/x-icon" />
  
    
    <link rel="stylesheet" href="https://unpkg.com/mvp.css">
    
    
  <meta property="og:title" content="Svelte 101 Workshop - Setup">
  <meta property="og:image" content="">
  <meta property="og:image:alt" content="">
  <meta property="og:description" content="">
  
  
  <link rel="stylesheet"
        href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/styles/agate.min.css">
  <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/highlight.min.js"></script>     
  <script>hljs.initHighlightingOnLoad();</script>  
  
</head>

<body>
  <div id="wrapper">
  <header>
  <nav>
    <a href="/">Workshop Menu</a>
    <a href="/z-prereqs">Prerequisites</a>
    <a href="/hyper63">About hyper63</a>
  </nav>
  <h1>SvelteJS 101 Workshop</h1>
</header>

<main>

<h1 id="setup-a-svelte-project-from-scratch">Setup a Svelte project from scratch</h1>
<p>In this article, we will walk step by step in setting up a Svelte project by scratch. Most of the time you will not need to do this. As an exercise, Walking through the process of creating a Svelte project from scratch will will give you a mental model of what is going on under the hood.</p>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>NodeJS v12 or higher <a href="https://nodejs.org">https://nodejs.org</a></li>
<li>Git <a href="https://git-scm.com/">https://git-scm.com/</a></li>
<li>A code editor: <a href="https://code.visualstudio.com">https://code.visualstudio.com</a></li>
</ul>
<h2 id="step-1">Step 1</h2>
<p>The first thing you want to do is to create a new project folder and initialize the project folder with <code>npm</code>.</p>
<article><aside> 

<p><code>npm</code> is a command line application that is used to install javascript modules for your front-end and server-side projects.</p>
</aside></article>

<pre><code class="language-sh">mkdir mysvelte
cd mysvelte
npm init -y # we use the -y to accept the default questions</code></pre>
<h2 id="step-2">Step 2</h2>
<p>Now that we have a basic nodejs application setup, we need to make it a svelte project. First, we will install the svelte npm module, this is the svelte compiler and since the compile step will happen at build time, we will install it as a development dependency.</p>
<pre><code class="language-sh">npm install --save-dev svelte</code></pre>
<p>Svelte compiles your <code>.svelte</code> files into js, we can see how this works with this short nodejs script.</p>
<p>In the node repl run this code:</p>
<article><aside>

<p>Just type node to run the repl, then click <CTRL> + C twice to quit</p>
</aside></article>

<pre><code class="language-js">const compiler = require(&#39;svelte/compiler&#39;)
console.log(
  compiler.compile(&#39;&lt;h1&gt;Hello World&lt;/h1&gt;&#39;).js.code
)</code></pre>
<p>We should see the following output:</p>
<pre><code class="language-js">/* generated by Svelte v3.25.0 */
import {
        SvelteComponent,
        detach,
        element,
        init,
        insert,
        noop,
        safe_not_equal
} from &quot;svelte/internal&quot;;

function create_fragment(ctx) {
        let h1;

        return {
                c() {
                        h1 = element(&quot;h1&quot;);
                        h1.textContent = &quot;Hello World&quot;;
                },
                m(target, anchor) {
                        insert(target, h1, anchor);
                },
                p: noop,
                i: noop,
                o: noop,
                d(detaching) {
                        if (detaching) detach(h1);
                }
        };
}

class Component extends SvelteComponent {
        constructor(options) {
                super();
                init(this, options, null, create_fragment, safe_not_equal, {});
        }
}

export default Component;</code></pre>
<p>This output is the generated code for a svelte component <code>&lt;h1&gt;Hello World&lt;/h1&gt;</code>.</p>
<p>But we are going to write more than one file and we need a tool that will read all of our code and bundle it together into a js file that can be served in the browser. </p>
<p>We are going to use Rollup to do our bundling.</p>
<article><aside>

<p>Rollup is a JS bundler, it can read and traverse files and compile them with tree shaking into a single JS bundle file that can be shared in the browser.</p>
</aside></article>

<p>In order to use Rollup we need to install it from npm.</p>
<pre><code class="language-sh">npm install --save-dev rollup</code></pre>
<p>We also need to install a couple of plugins for rollup. The two almost mandatory plugins are <code>@rollup/plugin-node-resolve</code> and <code>@rollup/plugin-commonjs</code>. These plugins provide helpers to work with node modules and commonjs modules. </p>
<article><aside>

<p>At some point in the future we should not need these plugins, but it is currently good practice to include them now.</p>
</aside></article>

<p>We also need a plugin for our <code>.svelte</code> files. This plugin is called <code>rollup-plugin-svelte</code>.</p>
<pre><code class="language-sh">npm install --save-dev @rollup/plugin-node-resolve @rollup/plugin-commonjs rollup-plugin-svelte</code></pre>
<p>Rollup is a command line application that takes a configuration file. This file gives rollup the input and output instructions for the project. Before we setup the config file, lets go ahead and create our project <code>src</code> and <code>public</code> folders.</p>
<pre><code class="language-sh">mkdir src public
touch public/index.html src/main.js src/App.svelte</code></pre>
<p>Also, lets create a placeholder html file for our project:</p>
<p>public/index.html</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Svelte Setup Example&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/mvp.css&quot;&gt;
    &lt;!-- get css from svelte components --&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/bundle.css&quot;&gt;
    &lt;!-- load app after dom is loaded --&gt;
    &lt;script defer src=&quot;/bundle.js&quot;&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>And lets create our <code>main.js</code> source file</p>
<p>src/main.js</p>
<pre><code class="language-js">import App from &#39;./App.svelte&#39;

const app = new App({target: document.body})

export default app</code></pre>
<p>Lets create our first svelte component <code>App.svelte</code></p>
<pre><code class="language-html">&lt;h1&gt;Hello world from Svelte&lt;/h1&gt;</code></pre>
<p>So now we should have three files:</p>
<ul>
<li>public/index.html</li>
<li>src/main.js</li>
<li>src/App.svelte</li>
</ul>
<p>What we want to do is create a rollup config that tells the rollup bundler to create a bundle.js and bundle.css file in the public directory. We need to create a <code>rollup.config.js</code> file in the root of the project directory.</p>
<pre><code class="language-js">import svelte from &#39;rollup-plugin-svelte&#39;
import resolve from &#39;@rollup/plugin-node-resolve&#39;
import commonjs from &#39;@rollup/plugin-commonjs&#39;

export default {
  input: &#39;src/main.js&#39;,
  output: {
    file: &#39;public/bundle.js&#39;,
    format: &#39;iife&#39;,
    name: &#39;App&#39;
  },
  plugins: [
    svelte({
      css: css =&gt; css.write(&#39;bundle.css&#39;)
    }),
    resolve(),
    commonjs()
  ]
}</code></pre>
<p>Lets walk through this config file. This is the file that rollup will use to compile your src code into a <code>bundle.js</code> and <code>bundle.css</code> file in the public folder. The input node is the string value of the root file in your project, in our case this is <code>src/main.js</code> it is the main project file. Then output object informs rollup to create a file in the public folder called <code>bundle.js</code> and it should be in the <code>iife</code> format as well as have a name of <code>App</code>. </p>
<article><aside>

<p>With Rollup you can create several different output formats from iife, cjs, to esm.</p>
</aside></article>

<p>And the plugin node contains an array of all the plugins your code needs to go through to get compiled properly. In our case, we need to go through (svelte, resolve, and commonjs). The Svelte plugin will publish any component based css in <code>bundle.css</code>. </p>
<p>Lets go ahead and modify our <code>package.json</code> file to include our build and watch scripts for our svelte project.</p>
<pre><code class="language-json">{
  ...
  &quot;scripts&quot;: {
    &quot;build&quot;: &quot;rollup -c&quot;,
    &quot;watch&quot;: &quot;rollup -cw&quot;,
    ...
  }
}</code></pre>
<p>Once this file is saved, we can type <code>npm run build</code> on the command line and we should see this as a result:</p>
<pre><code class="language-sh">&gt; mysvelte@1.0.0 build /Users/twilson63/play/mysvelte
&gt; rollup -c


src/main.js â†’ public/bundle.js...
created public/bundle.js in 302ms</code></pre>
<p>And if we list the files in the <code>public</code> directory we should see a <code>bundle.js</code> and a <code>bundle.css</code> file located in the public directory.</p>
<p>We can serve these files using any web server:</p>
<pre><code class="language-sh">npx w3 public</code></pre>
<p>Check out localhost:3000 in your browser</p>
<p>You should see <code>Hello world from Svelte</code>, if so we have a working svelte project.</p>
<p>Now that you have a working project, there is a whole bunch of stuff to add, but lets use a tool called <code>degit</code> to automate our svelte setup in a project directory.</p>
<p>If you are in the <code>mysvelte</code> directory, <code>cd ..</code> to run:</p>
<pre><code class="language-sh">degit sveltejs/template hello-svelte
cd hello-svelte
npm install
npm run dev</code></pre>
<p>The degit command pulls down the <a href="https://github.com/sveltejs/template">https://github.com/sveltejs/template</a> repository and clones it on your system using the project name you provide. Then npm install installs the dependencies of the project and finally npm run dev runs a watch script and a web server with live-reload setup so you can start coding!</p>
<p>There are alternative bundlers to choose from here:</p>
<p><a href="https://github.com/sveltejs/integrations#bundler-plugins">https://github.com/sveltejs/integrations#bundler-plugins</a></p>
<h2 id="summary">Summary</h2>
<p>In this article, we went through the process of setting up svelte from scratch to get a better understanding of what is happening behind the scenes when building a svelte application.</p>
<hr>
<p><a href="/">Home</a></p>
</main>

  </div> 
</body>

</html>
